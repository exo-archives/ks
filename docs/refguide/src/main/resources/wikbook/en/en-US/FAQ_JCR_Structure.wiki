h1. FAQ JCR Structure



h2.  Overview
eXo FAQ is a JCR based application. FAQ information is saved in eXo-JCR under FAQservice data directory.

!faqstructure.png!


h2. Category
Category is created from exo:faqCategory nodetype and defined to add data inside as:
* Sub-Category 
* Question Home 
* RSS 
System auto creates category home under FAQ application node when the first time launch application. All users create categories are the sub-category of category home.

The home category auto created here:

<tt>
/exo:applications/faqApp/categories
</tt>


* *Sub-Category*
In fact, sub category is also a category, we defined a mixin nodetype called *mix:faqSubCategory* to allow add a node with the same type with category to a existing category. When a category is created  this mixin nodetype will be mixed to that category. 


* *RSS* 
Each category has a RSS child node that stores a RSS feed representing all question in this category as binary data type. node type  exo:faqRSS

<tt>
/exo:applications/faqApp/categories/ks.rss
</tt>


h2. Question and Question home

Question home node creates from exo:faqQuestionHome nodetype that is defined as a child node of category. This node is containing all question node that created in side a category. Only question nodetype (exo:faqQuestion) can be added to question home.

The question home is created as a child node of category

<tt>
/exo:applications/faqApp/categories/questions
</tt>


* Question

Question node creates from exo:faqQuestion nodetype under question home. The answers, comments and attachments are defined as child node of question. 

The question node create under question home

<tt>
/exo:applications/faqApp/categories/questions/Question7364ba00c0a8014700bcf58acbbafae2
</tt>


* Multilanguages
Question support multilanguages, all other languages are storing as a child node of question and can be add to question via a mixin nodetype called mix:faqi18n

After added mixin nodetype mix:faqi18n to question, the nodetype exo:questionLanguageHome can add to question node and this nodetype will containing all languages node with nodetype exo:faqLanguage, all display properties of question are defined in exo:faqLanguage nodetype

h2. Answer, Comment and Attachment
Answer, comment and attachment are defined as child nodes of question node. Attachment is defined as a nt:file nodetype and storing directly under question node. Answers and comments are storing under answer home and comment home nodes

* exo:answerHome/exo:answer
<tt>
/exo:applications/faqApp/categories/questions/Question7364ba00c0a8014700bcf58acbbafae2/faqAnswerHome/Answer736e99dec0a8014701622a1157719bb4
</tt>

* exo:commentHome/exo:comment
<tt>
/exo:applications/faqApp/categories/questions/Question7364ba00c0a8014700bcf58acbbafae2/faqCommentHome/Comment736e99dec0a8014701622a1157719bb4
</tt>


h2. FAQ Setting

Storing information for sort data as order by, order type, sort question by vote. Each user has a dedicate setting for display data in faq as they want, the default setting is used if user have never save a setting. Node type is exo:faqUserSetting

<tt>
/exo:applications/faqApp/settingHome/userSettingHome/$\{username}
</tt>


h2. Template for FAQ portlet 
This place stores template for FAQ portlet. User can online edit this template in FAQ portlet to change layout, skins,...
The template is storing in an nt:file nodetype under template home node 

<tt>
/exo:applications/faqApp/templateHome/nt:file
</tt>

