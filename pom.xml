<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"> 

  <parent>
    <groupId>org.exoplatform</groupId>
    <artifactId>exo.parent</artifactId>
    <version>6</version>
  </parent>

  <modelVersion>4.0.0</modelVersion>
  <groupId>org.exoplatform.ks</groupId>
  <artifactId>ks-parent</artifactId>
  <version>1.2.3-SNAPSHOT</version>
  <packaging>pom</packaging>
  <name>eXo KS Parent</name>
  <description>eXo Knowledge Suite (KS) is a suite of collaborative applications oriented to knowledge management. It not only holds on-line discussions and posts user generated content but also answers the most frequently asked questions about sites/services.</description>
  <url>http://wiki.exoplatform.org/xwiki/bin/view/KS/</url>
  
  <properties>
    <!-- Informations for the Manifests -->
    <exo.product.name>exo-ks</exo.product.name>
    <exo.product.specification>1.2</exo.product.specification>
    
    <!-- Dependencies -->
    <org.exoplatform.kernel.version>2.0.10-SNAPSHOT</org.exoplatform.kernel.version>
    <org.exoplatform.core.version>2.1.8-SNAPSHOT</org.exoplatform.core.version>
    <org.exoplatform.ws.version>1.3.6-SNAPSHOT</org.exoplatform.ws.version>
    <org.exoplatform.jcr.version>1.10.7-SNAPSHOT</org.exoplatform.jcr.version>
    <org.exoplatform.portletcontainer.version>2.0.9-SNAPSHOT</org.exoplatform.portletcontainer.version>
    <org.exoplatform.portal.version>2.5.8-SNAPSHOT</org.exoplatform.portal.version>
    <org.exoplatform.exopackage.version>1.2.0</org.exoplatform.exopackage.version>
    <org.exoplatform.mvnexobuild.version>1.2.0</org.exoplatform.mvnexobuild.version>

    <maven.test.skip>true</maven.test.skip>
    <!-- ignore test failures -->
    <maven.test.failure.ignore>true</maven.test.failure.ignore>
  </properties>
  
  <issueManagement>
  	<system>jira</system>
  	<url>http://jira.exoplatform.org/browse/KS</url>
  </issueManagement>
  
  <ciManagement>
  	<system>hudson</system>
  	<url>http://builder.exoplatform.org/hudson/job/ks/</url>
  </ciManagement>

  <organization>
  	<name>eXo Platform SAS</name>
  	<url>http://www.exoplatform.com</url>
  </organization>

  <scm>
    <connection>scm:svn:http://svn.exoplatform.org/projects/ks/branches/1.2.x</connection>
    <developerConnection>scm:svn:http://svn.exoplatform.org/projects/ks/branches/1.2.x</developerConnection>
    <url>http://fisheye.exoplatform.org/browse/projects/ks/branches/1.2.x</url>
  </scm> 
  
  <modules>
    <module>web</module>
    <module>eXoApplication</module>
    <module>server</module>
    <module>migration1.2</module>   
    <module>packaging</module>
  </modules>

  <build>
    <resources>
      <resource>
        <directory>src/main/java</directory>
        <includes>
          <include>**/*.properties</include>
          <include>**/*.xml</include>
        </includes>
      </resource>
    </resources>
    <testResources>
      <testResource>
        <directory>src/test/java</directory>
        <includes>
          <include>**/*.properties</include>
          <include>**/*.xml</include>
        </includes>
      </testResource>
    </testResources>

    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-war-plugin</artifactId>
          <configuration>
            <archiveClasses>false</archiveClasses>
            <warSourceExcludes>WEB-INF/lib/*.jar</warSourceExcludes>
          </configuration>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-surefire-plugin</artifactId>
          <configuration>
            <forkMode>pertest</forkMode><!--once , pertest -->
            <systemProperties>
              <property>
                <name>mock.portal.dir</name>
                <value>${exo.projects.directory.src}/ks/branches/1.2.x/web/portal/src/main/webapp</value>
              </property>
            </systemProperties>
          </configuration>
        </plugin>
      </plugins>
    </pluginManagement>
  
  <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-antrun-plugin</artifactId>
          <executions>
            <execution>
              <id>compile</id>
              <phase>compile</phase>
              <configuration>
                <tasks>
                  <copy failonerror="false" todir="${basedir}/target/${project.build.finalName}/WEB-INF/classes">
                    <fileset dir="${basedir}/src/main/webapp/WEB-INF/classes">
                      <include name="**/*_en.properties" />
                    </fileset>
                    <globmapper from="*_en.properties" to="*.properties" />
                  </copy>
                </tasks>
              </configuration>
              <goals>
                <goal>run</goal>
              </goals>
            </execution>
          </executions>
        </plugin>    
    </plugins>
  </build>

  </project>
